import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import autoprefixer from 'autoprefixer';
import path from 'path';
import fs from 'fs';
import handlebars from 'handlebars';
import { nodePolyfills } from 'vite-plugin-node-polyfills';

const pages = {"stocktakedetails":{"outputDir":"./stocktakedetails","lang":"en","title":"Dashboard - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Dashboard - Shopify Inventory & BOM Manager"},{"name":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"keywords","content":"dashboard, metrics, orders, alerts, Shopify, inventory, BOM"},{"itemprop":"name","content":"Dashboard - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Dashboard Overview"},{"name":"twitter:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:title","content":"Dashboard Overview"},{"property":"og:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/stocktakedetails/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/stocktakedetails/"}]},"purchaseorders":{"outputDir":"./purchaseorders","lang":"en","title":"Dashboard - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Dashboard - Shopify Inventory & BOM Manager"},{"name":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"keywords","content":"dashboard, metrics, orders, alerts, Shopify, inventory, BOM"},{"itemprop":"name","content":"Dashboard - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Dashboard Overview"},{"name":"twitter:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:title","content":"Dashboard Overview"},{"property":"og:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/purchaseorders/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/purchaseorders/"}]},"home":{"outputDir":"./home","lang":"en","title":"Dashboard - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Dashboard - Shopify Inventory & BOM Manager"},{"name":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"keywords","content":"dashboard, metrics, orders, alerts, Shopify, inventory, BOM"},{"itemprop":"name","content":"Dashboard - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Dashboard Overview"},{"name":"twitter:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:title","content":"Dashboard Overview"},{"property":"og:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"index, follow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/home/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/home/"}]},"login":{"outputDir":"./login","lang":"en","title":"Login - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Login - Shopify Inventory & BOM Manager"},{"name":"description","content":"Login page for Shopify Inventory & BOM Manager SaaS app"},{"name":"keywords","content":"login, authentication, Shopify, inventory, BOM"},{"itemprop":"name","content":"Login - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Login page for Shopify Inventory & BOM Manager SaaS app"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Login to Shopify Inventory & BOM Manager"},{"name":"twitter:description","content":"Access your Shopify Inventory & BOM Manager account"},{"property":"og:title","content":"Login to Shopify Inventory & BOM Manager"},{"property":"og:description","content":"Access your Shopify Inventory & BOM Manager account"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"index, follow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/login/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/login/"}]},"activity-log":{"outputDir":"./activity-log","lang":"en","title":"Activity Log - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Activity Log - Shopify Inventory & BOM Manager"},{"name":"description","content":"Activity log with filters and detailed side panel"},{"name":"keywords","content":"activity log, audit, events"},{"itemprop":"name","content":"Activity Log - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Activity log with filters and detailed side panel"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Activity Log"},{"name":"twitter:description","content":"View system activity and audit logs"},{"property":"og:title","content":"Activity Log"},{"property":"og:description","content":"View system activity and audit logs"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/activity-log/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/activity-log/"}]},"reports":{"outputDir":"./reports","lang":"en","title":"Reports - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Reports - Shopify Inventory & BOM Manager"},{"name":"description","content":"Reports page with report cards and inline report views"},{"name":"keywords","content":"reports, inventory, stocktake, orders"},{"itemprop":"name","content":"Reports - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Reports page with report cards and inline report views"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Reports"},{"name":"twitter:description","content":"View and export inventory and order reports"},{"property":"og:title","content":"Reports"},{"property":"og:description","content":"View and export inventory and order reports"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/reports/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/reports/"}]},"settings":{"outputDir":"./settings","lang":"en","title":"Settings - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Settings - Shopify Inventory & BOM Manager"},{"name":"description","content":"Settings page with tabs for integrations, locations, users, and general"},{"name":"keywords","content":"settings, integrations, locations, users, general"},{"itemprop":"name","content":"Settings - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Settings page with tabs for integrations, locations, users, and general"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Settings"},{"name":"twitter:description","content":"Configure integrations, locations, users, and general tenant settings"},{"property":"og:title","content":"Settings"},{"property":"og:description","content":"Configure integrations, locations, users, and general tenant settings"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/settings/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/settings/"}]},"index":{"outputDir":"./","lang":"en","title":"Dashboard - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Dashboard - Shopify Inventory & BOM Manager"},{"name":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"keywords","content":"dashboard, metrics, orders, alerts, Shopify, inventory, BOM"},{"itemprop":"name","content":"Dashboard - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Dashboard Overview"},{"name":"twitter:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:title","content":"Dashboard Overview"},{"property":"og:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/"}]},"tenantselect":{"outputDir":"./tenantselect","lang":"en","title":"Dashboard - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Dashboard - Shopify Inventory & BOM Manager"},{"name":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"keywords","content":"dashboard, metrics, orders, alerts, Shopify, inventory, BOM"},{"itemprop":"name","content":"Dashboard - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Dashboard Overview"},{"name":"twitter:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:title","content":"Dashboard Overview"},{"property":"og:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/tenantselect/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/tenantselect/"}]},"stocktakesessionprint":{"outputDir":"./stocktakesessionprint","lang":"en","title":"Dashboard - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Dashboard - Shopify Inventory & BOM Manager"},{"name":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"keywords","content":"dashboard, metrics, orders, alerts, Shopify, inventory, BOM"},{"itemprop":"name","content":"Dashboard - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Dashboard overview with metrics, recent orders, alerts, and quick links"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Dashboard Overview"},{"name":"twitter:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:title","content":"Dashboard Overview"},{"property":"og:description","content":"Quick overview of components, products, orders, and alerts"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/stocktakesessionprint/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/stocktakesessionprint/"}]},"products":{"outputDir":"./products","lang":"en","title":"Products - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Products - Shopify Inventory & BOM Manager"},{"name":"description","content":"Products list with BOM status and search/filter capabilities"},{"name":"keywords","content":"products, BOM, Shopify, inventory"},{"itemprop":"name","content":"Products - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Products list with BOM status and search/filter capabilities"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Products List"},{"name":"twitter:description","content":"Manage products and their BOMs"},{"property":"og:title","content":"Products List"},{"property":"og:description","content":"Manage products and their BOMs"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/products/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/products/"}]},"components":{"outputDir":"./components","lang":"en","title":"Components - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Components - Shopify Inventory & BOM Manager"},{"name":"description","content":"Component SKU catalogue with inventory balances and filters"},{"name":"keywords","content":"components, inventory, SKU, stock"},{"itemprop":"name","content":"Components - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Component SKU catalogue with inventory balances and filters"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Components Catalogue"},{"name":"twitter:description","content":"Manage components and inventory balances"},{"property":"og:title","content":"Components Catalogue"},{"property":"og:description","content":"Manage components and inventory balances"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/components/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/components/"}]},"products/{productId}":{"outputDir":"./products/{productId}","lang":"en","title":"Product Detail & BOM - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Product Detail & BOM - Shopify Inventory & BOM Manager"},{"name":"description","content":"Detailed product info and BOM builder with add/edit components"},{"name":"keywords","content":"product detail, BOM builder, components, Shopify"},{"itemprop":"name","content":"Product Detail & BOM - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Detailed product info and BOM builder with add/edit components"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Product Detail & BOM"},{"name":"twitter:description","content":"View and edit BOM for selected product/variant"},{"property":"og:title","content":"Product Detail & BOM"},{"property":"og:description","content":"View and edit BOM for selected product/variant"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/products/{productId}/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/products/{productId}/"}]},"components/{componentId}":{"outputDir":"./components/{componentId}","lang":"en","title":"Component Detail - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Component Detail - Shopify Inventory & BOM Manager"},{"name":"description","content":"Component detail with info, inventory overview, movements, BOM usage"},{"name":"keywords","content":"component detail, inventory movements, BOM usage"},{"itemprop":"name","content":"Component Detail - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Component detail with info, inventory overview, movements, BOM usage"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Component Detail"},{"name":"twitter:description","content":"View and edit component details, stock movements, and BOM usage"},{"property":"og:title","content":"Component Detail"},{"property":"og:description","content":"View and edit component details, stock movements, and BOM usage"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/components/{componentId}/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/components/{componentId}/"}]},"orders/{orderId}":{"outputDir":"./orders/{orderId}","lang":"en","title":"Order Detail - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Order Detail - Shopify Inventory & BOM Manager"},{"name":"description","content":"Detailed order view with line items and component breakdown"},{"name":"keywords","content":"order detail, line items, component allocation"},{"itemprop":"name","content":"Order Detail - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Detailed order view with line items and component breakdown"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Order Detail"},{"name":"twitter:description","content":"View order lines and component requirements"},{"property":"og:title","content":"Order Detail"},{"property":"og:description","content":"View order lines and component requirements"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/orders/{orderId}/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/orders/{orderId}/"}]},"stocktake":{"outputDir":"./stocktake","lang":"en","title":"Stocktake Sessions - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Stocktake Sessions - Shopify Inventory & BOM Manager"},{"name":"description","content":"List of stocktake sessions with filters and new session creation"},{"name":"keywords","content":"stocktake, inventory, sessions"},{"itemprop":"name","content":"Stocktake Sessions - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"List of stocktake sessions with filters and new session creation"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Stocktake Sessions"},{"name":"twitter:description","content":"Manage stocktake sessions and create new ones"},{"property":"og:title","content":"Stocktake Sessions"},{"property":"og:description","content":"Manage stocktake sessions and create new ones"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/stocktake/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/stocktake/"}]},"orders":{"outputDir":"./orders","lang":"en","title":"Orders - Shopify Inventory & BOM Manager","cacheVersion":8,"meta":[{"name":"title","content":"Orders - Shopify Inventory & BOM Manager"},{"name":"description","content":"Orders list with status, filters, and search"},{"name":"keywords","content":"orders, Shopify, inventory, BOM"},{"itemprop":"name","content":"Orders - Shopify Inventory & BOM Manager"},{"itemprop":"description","content":"Orders list with status, filters, and search"},{"name":"twitter:card","content":"summary"},{"name":"twitter:title","content":"Orders List"},{"name":"twitter:description","content":"Manage and view orders and their statuses"},{"property":"og:title","content":"Orders List"},{"property":"og:description","content":"Manage and view orders and their statuses"},{"property":"og:site_name","content":"BOM Build"},{"property":"og:type","content":"website"},{"name":"robots","content":"noindex, nofollow"}],"scripts":{"head":"\n","body":"\n"},"baseTag":{"href":"/","target":"_self"},"alternateLinks":[{"rel":"alternate","hreflang":"x-default","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/orders/"},{"rel":"alternate","hreflang":"en","href":"https://6b33d938-836b-44f0-ae5b-d9d196cd0a91.weweb-preview.io/orders/"}]}};

// Read the main HTML template
const template = fs.readFileSync(path.resolve(__dirname, 'template.html'), 'utf-8');
const compiledTemplate = handlebars.compile(template);

// Generate an HTML file for each page with its metadata
Object.values(pages).forEach(pageConfig => {
    // Compile the template with page metadata
    const html = compiledTemplate({
        title: pageConfig.title,
        lang: pageConfig.lang,
        meta: pageConfig.meta,
        structuredData: pageConfig.structuredData || null,
        scripts: {
            head: pageConfig.scripts.head,
            body: pageConfig.scripts.body,
        },
        alternateLinks: pageConfig.alternateLinks,
        cacheVersion: pageConfig.cacheVersion,
        baseTag: pageConfig.baseTag,
    });

    // Save output html for each page
    if (!fs.existsSync(pageConfig.outputDir)) {
        fs.mkdirSync(pageConfig.outputDir, { recursive: true });
    }
    fs.writeFileSync(`${pageConfig.outputDir}/index.html`, html);
});

const rollupOptionsInput = {};
for (const pageName in pages) {
    rollupOptionsInput[pageName] = path.resolve(__dirname, pages[pageName].outputDir, 'index.html');
}

export default defineConfig(() => {
    return {
        plugins: [nodePolyfills({ include: ['events', 'stream', 'string_decoder'] }), vue()],
        base: "/",
        resolve: {
            alias: {
                '@': path.resolve(__dirname, './src'),
            },
        },
        css: {
            preprocessorOptions: {
                scss: {
                    api: 'modern-compiler',
                },
            },
            postcss: {
                plugins: [autoprefixer],
            },
        },
        build: {
            chunkSizeWarningLimit: 10000,
            rollupOptions: {
                input: rollupOptionsInput,
                onwarn: (entry, next) => {
                    if (entry.loc?.file && /js$/.test(entry.loc.file) && /Use of eval in/.test(entry.message)) return;
                    return next(entry);
                },
                maxParallelFileOps: 900,
            },
        },
        logLevel: 'warn',
    };
});
